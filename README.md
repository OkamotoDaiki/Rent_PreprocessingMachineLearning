# 【Webスクレイピングと前処理】賃貸サイトからお得な賃貸を機械学習で選定する

賃貸サイトから賃貸情報を取得し、機械学習でお得な賃貸を選定するシリーズ。ここで、"お得な賃貸"とは実際価格が機械学習で計算された予測価格よりも低い場合を指します。
今回は機械学習に入力する前にあたる工程である"Webスクレイピングで情報を取得"し、"データを整形する"ところまでです。

今回はSUUMOから情報を取得しますが、あくまで私的利用であることをご理解ください。また、利用する場合は以下のSUUMOの利用規約の確認を推奨します。
https://cdn.p.recruit.co.jp/terms/suu-t-1003/index.html

# DEMO

SUUMOから取得したデータを処理し、整理されたデータの一部分を記載します。

```
|マンション名|都|区|区域|間取り|間取りDK|間取りK|間取りL|間取りS|築年数|建物高さ|階|専有面積|賃料+管理費|敷/礼|路線1|駅1|徒歩1|賃料|管理費|敷金|礼金|
|:----|:----|:----|:----|:----|:----|:----|:----|:----|:----|:----|:----|:----|:----|:----|:----|:----|:----|:----|:----|:----|:----|
|COSMOSGRACIAUchikanda【コスモグラシア内神田】|東京都|千代田区|内神田２|2|1|0|1|1|0|7|4|47|256000|236000|ＪＲ山手線|神田駅|4|236000|20000|0|236000|
|テルセーロ三鈴|東京都|千代田区|岩本町１|2|1|0|1|0|25|8|4|64|227000|430000|東京メトロ日比谷線|小伝馬町駅|5|215000|12000|215000|215000|
|レジディア神田岩本町|東京都|千代田区|岩本町２|1|0|0|0|0|19|15|7|22|96000|172000|都営新宿線|岩本町駅|3|86000|10000|86000|86000|
|ＪＲ山手線秋葉原駅15階建築17年|東京都|千代田区|外神田４|1|0|0|0|0|17|15|4|23|118000|0|ＪＲ山手線|秋葉原駅|5|103000|15000|0|0|
|ベスティエ秋葉原|東京都|千代田区|東神田２|2|1|0|1|1|1|10|8|61|279500|271000|都営新宿線|岩本町駅|5|271000|8500|0|271000|
```

# Features

本リポジトリにあるrun.shの区、日付、取得したいURLを変更するだけで、resultファイルに前処理されたcsvファイルが生成されます。機械学習を行う場合は、最終的に生成されたpreprocessing_*.csvを利用します。

# Requirement

* python3 3.8.10
* numpy, pandas, BeautifulSoup, request 

# Usage

run.shを開き、市町村(city),日付(today)の名前を変更し、input_URL(取得したいURL)を設定します。
その後、次のコマンドでrun.shを実行すると処理が始まります。
※スクレイピングマナーで1ページ当たり最大1分を要しますので、時間はかかります。

```
bash run.sh
```

# Author

* Oka.D.
* okamotoschool2018@gmail.com

# License
[MIT license](https://en.wikipedia.org/wiki/MIT_License).